<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Wine List</title>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400&family=Lora:wght@400&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: 'Lora', serif;
            line-height: 1.5;
            padding: 0;
            box-sizing: border-box;
            position: relative;
            background: #fff;
        }

        /* Top Image with Gradient */
        .top-image-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1; /* Ensure this sits above background */
            overflow: hidden;
            pointer-events: none; /* Allow clicks through gradient */
        }

        .top-image-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 20vh; /* Adjust as needed */
            background: linear-gradient(white 0%, transparent 100%);
            z-index: 1;
            pointer-events: none; /* Allow clicks through gradient */
        }

        .top-image-container img {
            width: 100%;
            display: block;
            position: relative;
            z-index: 2; /* Image on top of gradient */
            pointer-events: none; /* Allow clicks through gradient */
            max-height: 1600px;
        }

        /* Bottom half image with gradient behind it */
        .bottom-image-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 1; /* Ensure this sits above background */
            overflow: hidden;
            pointer-events: none; /* Allow clicks through gradient */
        }

        .bottom-image-container::before {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 20vh; /* Adjust as needed */
            background: linear-gradient(transparent 0%, white 100%);
            z-index: 1;
            pointer-events: none; /* Allow clicks through gradient */
        }

        .bottom-image-container img {
            width: 100%;
            display: block;
            position: relative;
            z-index: 2; /* Image on top of gradient */
            pointer-events: none; /* Allow clicks through gradient */
        }

        h1 {
            font-size: 1.8rem;
            font-family: 'Fraunces', serif;
            text-align: center;
            margin: 2rem 0;
            color: #C72D2F;
        }

        .container {
            width: 90%;
            max-width: 800px;
            margin: 0 auto;
            padding-top: 250px;
            padding-bottom: 150px;
        }

        .section {
            margin-bottom: 4rem;
        }

        .varietal-heading {
            font-size: 1rem;
            font-weight: normal;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: #C72D2F;
            font-family: 'Fraunces', serif;
            text-transform: uppercase;
            letter-spacing: 0.25em;
        }

        /* Using a grid layout for two columns */
        .wine-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: .5rem;
            column-gap: 1rem;
        }

        .wine-item {
            border-bottom: 1px solid #e9e9e9;
            padding-bottom: 0.4rem;
            font-size: 0.9rem;
            display: flex;
            justify-content: space-between;
            align-items: baseline;
        }

        .wine-details {
            display: flex;
            align-items: baseline;
            gap: 1ch;
        }

        .wine-name {
            font-weight: normal;
            color: #000000;
        }

        .wine-scores {
            font-size: 0.8rem;
            color: #777;
            line-height: 14px;
        }

        .price-details {
            display: flex;
            align-items: baseline;
            gap: 1ch;
        }

        .winery-price {
            font-size: 0.9rem;
            color: #777;
            text-decoration: line-through;
        }

        .wine-price {
            font-size: 0.9rem;
            color: #000000;
            font-weight: normal;
        }

        /* On smaller screens, revert to a single column */
        @media (max-width: 767px) {
            .wine-list {
                grid-template-columns: 1fr;
            }
            .container {
                padding-top: 200px;
            }
        }

        @media (max-width: 640px) {
            .wine-list {
                grid-template-columns: 1fr;
            }
            .container {
                padding-top: 150px;
            }
        }
    </style>
</head>
<body>
    <div class="top-image-container">
        <div class="top-gradient"></div>
        <img src="top-bg.svg" alt="Top Image">    
    </div>

    <div class="bottom-image-container">
        <img src="bottom-bg.svg" alt="Bottom Image">
        <div class="bottom-gradient"></div>
    </div>
    
    <div class="container">
        <div id="content1" class="section"></div>
        <div id="content2" class="section"></div>
    </div>

    <script>
        // Sample CSV data as a string
        const csvData = `
Wine,Price,Winery Price,WS,WE,RP,JS,JD,V,D,Varietal
Boen Russian River,24.99,35,,,,,,,,Pinot Noir
Four Graces,26.99,30,92,,93,,,,,Pinot Noir
En Route,39.99,60,,,,,,,,Pinot Noir
Benton Lane,22.99,35,,,,,,,,Pinot Noir
Resonance,39.99,40,94 Top 100,,,,,,,Pinot Noir
Black Kite 'Kite's Rest',39.99,55,,,,,,,,Pinot Noir
Chalk Hill,21.99,,92,,,,,,,Pinot Noir
All Belle Glos,34.99,55,,,,,,,,Pinot Noir
Martinelli 'Bella Vigna',45.99,,,,,,,,,Pinot Noir
Merry Edwards,49.99,,,,,,,,,Sauvignon Blanc
Dog Point,26.99,,94,,,92,,93,,Sauvignon Blanc
Martin Ray,19.99,,,,,,,,,Sauvignon Blanc
Rombauer,26.99,,,,,,,,,Sauvignon Blanc
Craggy Range,19.99,,94 Top 100,,,,,,,Sauvignon Blanc
Duckhorn,22.99,,,,,,,,,Sauvignon Blanc
Coquerel,19.99,,,,,,,,,Sauvignon Blanc
Emmolo,16.99,22,,,,,,,,Sauvignon Blanc
Bollinger,69.99,90,,,,,,,,Bubbles
G.H. Mumm Brut,34.99,55,,,,,,,,Bubbles
G.H. Mumm Rosé,39.99,65,,,,,,,,Bubbles
J Lassalle,39.99,,,,,,,,,Bubbles
Martin Ray Rosé,44.99,60,,,,,,,,Bubbles
Scharffenberger,32.99,,,,,,,,,Bubbles
Scharffenberger Rosé,26.99,,,,,,,,,Bubbles
La Marca,12.99,20,,,,,,,,Bubbles
En Route,39.99,50,,,,,,,,Chardonnay
Rombauer,37.99,42,,,,,,,,Chardonnay
Frank Family,26.99,42,,,,,,,,Chardonnay
Ferrari Carano,16.99,27,,,,,,,,Chardonnay
Sonoma Cutrer,19.99,32,,,,,,,,Chardonnay
Mer Soleil,15.99,24,,,,,,,,Chardonnay
Walt,29.99,40,,,,,,,,Chardonnay
Trefethen,26.99,40,,,,,,,,Chardonnay
Harken,19.99,18,,,,,,,,Chardonnay
AXR,44.99,65,,,,94,,,,Red Blend
Alpha Omega,49.99,,,,,,,,,Red Blend
Pahlmeyer Jayson,64.99,90,,,,,,,,Red Blend
The Prisoner,39.99,,,,,,,,,Red Blend
Ferrari Carano Siena,19.99,30,,,,,,,,Red Blend
Marietta OVR,15.99,,,,93,,,,,Red Blend
8 Years in the Desert,43.99,,,,,,,,,Red Blend
Whitehall Lane Tre Leoni,26.99,,,,,,,,,Red Blend
Conundrum,15.99,22,,,,,,,,Red Blend
Biale Black Chicken,49.99,55,,,,,,,,Alternative Red
Seghesio Sonoma,19.99,25,,,,,,,,Alternative Red
Saldo Zin,23.99,34,,,,,,,,Alternative Red
Truchard Zin,29.99,35,,,,,,,,Alternative Red
Ridge Geyserville,46.99,,95,,,,,,,Alternative Red
Duckhorn Merlot,49.99,,,,,97,,,,Alternative Red
Ferrari Carano Merlot,21.99,37,,,,,,,,Alternative Red
All Nickel & Nickel,99.99,135,,,,,,,,Cabernet
Caymus Liters,89.99,,,,,,,,,Cabernet
Mount Veeder,49.99,75,,,,,,,,Cabernet
Caymus Cali,49.99,65,,,,,,,,Cabernet
Far Niente Bella Union,54.99,80,92,,,,,,,Cabernet
Frank Family Magnum,99.99,150,,,,,,,,Cabernet
Far Niente Post & Beam,44.99,55,,,,,,,,Cabernet
Silver Oak Alex,79.99,100,,,,,,,95,Cabernet
Duckhorn Cab,52.99,80,,,,,,,,Cabernet
Quilt,29.99,55,,,,,,,,Cabernet
Charles Krug,29.99,41,,93,,,,,,Cabernet
Jordan,49.99,60,,,95,,,,,Cabernet
Ink Grade,59.99,120,,,,,,,,Cabernet
Coquerel,39.99,65,,,,,,,,Cabernet
Justin,23.99,30,,,,,,,,Cabernet
Serial,19.99,35,,,,,,,,Cabernet
Simi,16.99,26,,,,,,,,Cabernet
Daou Reserve,44.99,65,,,94,95,,,,Cabernet
Daou,19.99,30,,,,,,,,Cabernet
Educated Guess,24.99,35,,91,,,,,,Cabernet
Banfi Aska,29.99,,,,,,,,,Import Red
Banfi Brunello,59.99,80,94,,,95,,,,Import Red
Domaine Tempier,44.99,65,,,,,,,,Import Red
Muga Riva Reserva,29.99,40,,,,,,,,Import Red
Penfolds 389,44.99,80,94,,96,96,,,,Import Red
Breca Grenacha,18.99 or 2 for $25,,,,,,,,,Import Red
`;

        // Page 1 and Page 2 varietal mappings
        const page1Varietals = ["Cabernet", "Pinot Noir", "Bubbles"];
        const page2Varietals = ["Chardonnay", "Red Blend", "Alternative Red", "Sauvignon Blanc", "Import Red"];

        // Function to parse CSV
        function parseCSV(data) {
            const rows = data.trim().split("\n");
            const headers = rows.shift().split(",");
            return rows.map(row => {
                const values = row.split(",");
                return headers.reduce((acc, header, index) => {
                    acc[header.trim()] = values[index]?.trim();
                    return acc;
                }, {});
            });
        }

        // Function to organize wines by varietal
        function organizeByVarietal(wines) {
            return wines.reduce((acc, wine) => {
                const varietal = wine["Varietal"];
                if (!acc[varietal]) {
                    acc[varietal] = [];
                }
                acc[varietal].push(wine);
                return acc;
            }, {});
        }

        // Function to generate HTML for wines on a specific page
        function generatePageHTML(varietals, containerId, varietalData) {
            const container = document.getElementById(containerId);
            varietals.forEach((varietal, index) => {
                if (varietalData[varietal]) {
                    const varietalHeading = document.createElement("div");
                    varietalHeading.className = "varietal-heading";
                    varietalHeading.textContent = varietal;

                    if (index === 0) {
                        varietalHeading.style.marginTop = "0";
                    }

                    container.appendChild(varietalHeading);

                    const wineList = document.createElement("div");
                    wineList.className = "wine-list";

                    varietalData[varietal].forEach(wine => {
                        const wineItem = document.createElement("div");
                        wineItem.className = "wine-item";

                        // Wine details
                        const wineDetails = document.createElement("div");
                        wineDetails.className = "wine-details";

                        const wineName = document.createElement("div");
                        wineName.className = "wine-name";
                        wineName.textContent = wine["Wine"];

                        const wineScores = document.createElement("div");
                        wineScores.className = "wine-scores";
                        wineScores.textContent = [
                            wine["WS"] ? `WS: ${wine["WS"]}` : "",
                            wine["WE"] ? `WE: ${wine["WE"]}` : "",
                            wine["RP"] ? `RP: ${wine["RP"]}` : "",
                            wine["JS"] ? `JS: ${wine["JS"]}` : "",
                            wine["JD"] ? `JD: ${wine["JD"]}` : "",
                        ]
                            .filter(Boolean)
                            .join(" | ");

                        wineDetails.appendChild(wineName);
                        if (wineScores.textContent) wineDetails.appendChild(wineScores);

                        // Price details
                        const priceDetails = document.createElement("div");
                        priceDetails.className = "price-details";

                        if (wine["Winery Price"]) {
                            const wineryPrice = document.createElement("div");
                            wineryPrice.className = "winery-price";
                            wineryPrice.textContent = `$${wine["Winery Price"]}`;
                            priceDetails.appendChild(wineryPrice);
                        }

                        const winePrice = document.createElement("div");
                        winePrice.className = "wine-price";
                        winePrice.textContent = `$${wine["Price"] || "N/A"}`;

                        priceDetails.appendChild(winePrice);

                        // Append to wine item
                        wineItem.appendChild(wineDetails);
                        wineItem.appendChild(priceDetails);
                        wineList.appendChild(wineItem);
                    });

                    container.appendChild(wineList);
                }
            });
        }

        // Process and display wines
        const wines = parseCSV(csvData);
        const organizedWines = organizeByVarietal(wines);

        // Generate HTML for first and second sections
        generatePageHTML(page1Varietals, "content1", organizedWines);
        generatePageHTML(page2Varietals, "content2", organizedWines);
    </script>
</body>
</html>
